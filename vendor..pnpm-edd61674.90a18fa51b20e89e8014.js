"use strict";(self.webpackChunkpixijs_game=self.webpackChunkpixijs_game||[]).push([[630],{4573:(t,e,s)=>{var i=s(9084),r=s(9160),a=s(4942),n=s(4494),h=s(8554),o=s(2138),l=s(7474);const c=class t{constructor(t,e){this.linkedSheets=[],this._texture=t instanceof h.g?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=e;const s=parseFloat(e.meta.scale);s?(this.resolution=s,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise((e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()}))}_processFrames(e){let s=e;const i=t.BATCH_SIZE;for(;s-e<i&&s<this._frameKeys.length;){const t=this._frameKeys[s],e=this._frames[t],i=e.frame;if(i){let s=null,r=null;const a=!1!==e.trimmed&&e.sourceSize?e.sourceSize:e.frame,n=new l.M(0,0,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution);s=e.rotated?new l.M(Math.floor(i.x)/this.resolution,Math.floor(i.y)/this.resolution,Math.floor(i.h)/this.resolution,Math.floor(i.w)/this.resolution):new l.M(Math.floor(i.x)/this.resolution,Math.floor(i.y)/this.resolution,Math.floor(i.w)/this.resolution,Math.floor(i.h)/this.resolution),!1!==e.trimmed&&e.spriteSourceSize&&(r=new l.M(Math.floor(e.spriteSourceSize.x)/this.resolution,Math.floor(e.spriteSourceSize.y)/this.resolution,Math.floor(i.w)/this.resolution,Math.floor(i.h)/this.resolution)),this.textures[t]=new h.g({source:this.textureSource,frame:s,orig:n,trim:r,rotate:e.rotated?2:0,defaultAnchor:e.anchor,defaultBorders:e.borders,label:t.toString()})}s++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let s=0;s<t[e].length;s++){const i=t[e][s];this.animations[e].push(this.textures[i])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((()=>{this._batchIndex*t.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())}),0)}destroy(t=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};c.BATCH_SIZE=1e3;let d=c;const u=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function _(t,e,s){const i={};if(t.forEach((t=>{i[t]=e})),Object.keys(e.textures).forEach((t=>{i[t]=e.textures[t]})),!s){const s=o.A.dirname(t[0]);e.linkedSheets.forEach(((t,r)=>{const a=_([`${s}/${e.data.meta.related_multi_packs[r]}`],t,!0);Object.assign(i,a)}))}return i}const m={extension:i.Ag.Asset,cache:{test:t=>t instanceof d,getCacheableAssets:(t,e)=>_(t,e,!1)},resolver:{extension:{type:i.Ag.ResolveParser,name:"resolveSpritesheet"},test:t=>{const e=t.split("?")[0].split("."),s=e.pop(),i=e.pop();return"json"===s&&u.includes(i)},parse:t=>{const e=t.split(".");return{resolution:parseFloat(a.x.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:i.Ag.LoadParser,priority:r.T.Normal,name:"spritesheetLoader"},testParse:async(t,e)=>".json"===o.A.extname(e.src).toLowerCase()&&!!t.frames,async parse(t,e,s){const{texture:i,imageFilename:r}=e?.data??{};let a,l=o.A.dirname(e.src);if(l&&l.lastIndexOf("/")!==l.length-1&&(l+="/"),i instanceof h.g)a=i;else{const i=(0,n.Y)(l+(r??t.meta.image),e.src);a=(await s.load([i]))[i]}const c=new d(a.source,t);await c.parse();const u=t?.meta?.related_multi_packs;if(Array.isArray(u)){const t=[];for(const i of u){if("string"!=typeof i)continue;let r=l+i;e.data?.ignoreMultiPack||(r=(0,n.Y)(r,e.src),t.push(s.load({src:r,data:{ignoreMultiPack:!0}})))}const i=await Promise.all(t);c.linkedSheets=i,i.forEach((t=>{t.linkedSheets=[c].concat(c.linkedSheets.filter((e=>e!==t)))}))}return c},async unload(t,e,s){await s.unload(t.textureSource._sourceOrigin),t.destroy(!1)}}};i.XO.add(m)},6212:(t,e,s)=>{s.d(e,{R:()=>n});var i=s(2947);class r{constructor(t,e=null,s=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=s,this._once=i}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const a=class t{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new r(null,null,1/0),this.deltaMS=1/t.targetFPMS,this.elapsedMS=1/t.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,s=i.d.NORMAL){return this._addListener(new r(t,e,s))}addOnce(t,e,s=i.d.NORMAL){return this._addListener(new r(t,e,s,!0))}_addListener(t){let e=this._head.next,s=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(s);break}s=e,e=e.next}t.previous||t.connect(s)}else t.connect(s);return this._startIfPossible(),this}remove(t,e){let s=this._head.next;for(;s;)s=s.match(t,e)?s.destroy():s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let s;if(e>this.lastTime){if(s=this.elapsedMS=e-this.lastTime,s>this._maxElapsedMS&&(s=this._maxElapsedMS),s*=this.speed,this._minElapsedMS){const t=e-this._lastFrame|0;if(t<this._minElapsedMS)return;this._lastFrame=e-t%this._minElapsedMS}this.deltaMS=s,this.deltaTime=this.deltaMS*t.targetFPMS;const i=this._head;let r=i.next;for(;r;)r=r.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const s=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,s)/1e3,t.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(0===t)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!t._shared){const e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared}static get system(){if(!t._system){const e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system}};a.targetFPMS=.06;let n=a},2947:(t,e,s)=>{s.d(e,{d:()=>i});var i=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(i||{})}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9yLi5wbnBtLWVkZDYxNjc0LjNhYTNiZWU2OTA1ZTY1ODdmM2QwLmpzIiwibWFwcGluZ3MiOiJtTEFJQSxNQUFNQSxFQUFlLE1BQU1BLEVBS3pCLFdBQUFDLENBQVlDLEVBQVNDLEdBRW5CQyxLQUFLQyxhQUFlLEdBQ3BCRCxLQUFLRSxTQUFXSixhQUFtQkssRUFBQSxFQUFVTCxFQUFVLEtBQ3ZERSxLQUFLSSxjQUFnQk4sRUFBUU8sT0FDN0JMLEtBQUtNLFNBQVcsQ0FBQyxFQUNqQk4sS0FBS08sV0FBYSxDQUFDLEVBQ25CUCxLQUFLRCxLQUFPQSxFQUNaLE1BQU1TLEVBQWlCQyxXQUFXVixFQUFLVyxLQUFLQyxPQUN4Q0gsR0FDRlIsS0FBS1ksV0FBYUosRUFDbEJWLEVBQVFPLE9BQU9PLFdBQWFaLEtBQUtZLFlBRWpDWixLQUFLWSxXQUFhZCxFQUFRTyxPQUFPUSxZQUVuQ2IsS0FBS2MsUUFBVWQsS0FBS0QsS0FBS2dCLE9BQ3pCZixLQUFLZ0IsV0FBYUMsT0FBT0MsS0FBS2xCLEtBQUtjLFNBQ25DZCxLQUFLbUIsWUFBYyxFQUNuQm5CLEtBQUtvQixVQUFZLElBQ25CLENBS0EsS0FBQUMsR0FDRSxPQUFPLElBQUlDLFNBQVNDLElBQ2xCdkIsS0FBS29CLFVBQVlHLEVBQ2pCdkIsS0FBS21CLFlBQWMsRUFDZm5CLEtBQUtnQixXQUFXUSxRQUFVNUIsRUFBYTZCLFlBQ3pDekIsS0FBSzBCLGVBQWUsR0FDcEIxQixLQUFLMkIscUJBQ0wzQixLQUFLNEIsa0JBRUw1QixLQUFLNkIsWUFDUCxHQUVKLENBS0EsY0FBQUgsQ0FBZUksR0FDYixJQUFJQyxFQUFhRCxFQUNqQixNQUFNRSxFQUFZcEMsRUFBYTZCLFdBQy9CLEtBQU9NLEVBQWFELEVBQW9CRSxHQUFhRCxFQUFhL0IsS0FBS2dCLFdBQVdRLFFBQVEsQ0FDeEYsTUFBTVMsRUFBSWpDLEtBQUtnQixXQUFXZSxHQUNwQmhDLEVBQU9DLEtBQUtjLFFBQVFtQixHQUNwQkMsRUFBT25DLEVBQUtvQyxNQUNs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QU9ULEVBQVErQyxPQUNqQixDQVdBLGlCQUFXQyxHQUNULElBQUtoRCxFQUFRaUQsUUFBUyxDQUNwQixNQUFNRCxFQUFTaEQsRUFBUWlELFFBQVUsSUFBSWpELEVBQ3JDZ0QsRUFBTy9DLFdBQVksRUFDbkIrQyxFQUFPdkMsWUFBYSxDQUN0QixDQUNBLE9BQU9ULEVBQVFpRCxPQUNqQixHQU1GakQsRUFBUWMsV0FBYSxJQUNyQixJQUFJb0MsRUFBU2xELEMsa0NDMVliLElBQUltRCxFQUFrQyxDQUFFQyxJQUN0Q0EsRUFBaUJBLEVBQThCLFlBQUksSUFBTSxjQUN6REEsRUFBaUJBLEVBQXVCLEtBQUksSUFBTSxPQUNsREEsRUFBaUJBLEVBQXlCLE9BQUksR0FBSyxTQUNuREEsRUFBaUJBLEVBQXNCLEtBQUssSUFBTSxNQUNsREEsRUFBaUJBLEVBQTBCLFNBQUssSUFBTSxVQUMvQ0EsR0FONkIsQ0FPbkNELEdBQW1CLENBQUMsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3BpeGlqcy1nYW1lLy4vbm9kZV9tb2R1bGVzLy5wbnBtL3BpeGkuanNAOC42LjQvbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL3Nwcml0ZXNoZWV0L1Nwcml0ZXNoZWV0Lm1qcyIsIndlYnBhY2s6Ly9waXhpanMtZ2FtZS8uL25vZGVfbW9kdWxlcy8ucG5wbS9waXhpLmpzQDguNi40L25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi9zcHJpdGVzaGVldC9zcHJpdGVzaGVldEFzc2V0Lm1qcyIsIndlYnBhY2s6Ly9waXhpanMtZ2FtZS8uL25vZGVfbW9kdWxlcy8ucG5wbS9waXhpLmpzQDguNi40L25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi9zcHJpdGVzaGVldC9pbml0Lm1qcyIsIndlYnBhY2s6Ly9waXhpanMtZ2FtZS8uL25vZGVfbW9kdWxlcy8ucG5wbS9waXhpLmpzQDguNi40L25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi90aWNrZXIvVGlja2VyTGlzdGVuZXIubWpzIiwid2VicGFjazovL3BpeGlqcy1nYW1lLy4vbm9kZV9tb2R1bGVzLy5wbnBtL3BpeGkuanNAOC42LjQvbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL3RpY2tlci9UaWNrZXIubWpzIiwid2VicGFjazovL3BpeGlqcy1nYW1lLy4vbm9kZV9tb2R1bGVzLy5wbnBtL3BpeGkuanNAOC42LjQvbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL3RpY2tlci9jb25zdC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSAnLi4vbWF0aHMvc2hhcGVzL1JlY3RhbmdsZS5tanMnO1xuaW1wb3J0IHsgVGV4dHVyZSB9IGZyb20gJy4uL3JlbmRlcmluZy9yZW5kZXJlcnMvc2hhcmVkL3RleHR1cmUvVGV4dHVyZS5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmNvbnN0IF9TcHJpdGVzaGVldCA9IGNsYXNzIF9TcHJpdGVzaGVldCB7XG4gIC8qKlxuICAgKiBAcGFyYW0gdGV4dHVyZSAtIFJlZmVyZW5jZSB0byB0aGUgc291cmNlIEJhc2VUZXh0dXJlIG9iamVjdC5cbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgLSBTcHJpdGVzaGVldCBpbWFnZSBkYXRhLlxuICAgKi9cbiAgY29uc3RydWN0b3IodGV4dHVyZSwgZGF0YSkge1xuICAgIC8qKiBGb3IgbXVsdGktcGFja2VkIHNwcml0ZXNoZWV0cywgdGhpcyBjb250YWlucyBhIHJlZmVyZW5jZSB0byBhbGwgdGhlIG90aGVyIHNwcml0ZXNoZWV0cyBpdCBkZXBlbmRzIG9uLiAqL1xuICAgIHRoaXMubGlua2VkU2hlZXRzID0gW107XG4gICAgdGhpcy5fdGV4dHVyZSA9IHRleHR1cmUgaW5zdGFuY2VvZiBUZXh0dXJlID8gdGV4dHVyZSA6IG51bGw7XG4gICAgdGhpcy50ZXh0dXJlU291cmNlID0gdGV4dHVyZS5zb3VyY2U7XG4gICAgdGhpcy50ZXh0dXJlcyA9IHt9O1xuICAgIHRoaXMuYW5pbWF0aW9ucyA9IHt9O1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgY29uc3QgbWV0YVJlc29sdXRpb24gPSBwYXJzZUZsb2F0KGRhdGEubWV0YS5zY2FsZSk7XG4gICAgaWYgKG1ldGFSZXNvbHV0aW9uKSB7XG4gICAgICB0aGlzLnJlc29sdXRpb24gPSBtZXRhUmVzb2x1dGlvbjtcbiAgICAgIHRleHR1cmUuc291cmNlLnJlc29sdXRpb24gPSB0aGlzLnJlc29sdXRpb247XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVzb2x1dGlvbiA9IHRleHR1cmUuc291cmNlLl9yZXNvbHV0aW9uO1xuICAgIH1cbiAgICB0aGlzLl9mcmFtZXMgPSB0aGlzLmRhdGEuZnJhbWVzO1xuICAgIHRoaXMuX2ZyYW1lS2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuX2ZyYW1lcyk7XG4gICAgdGhpcy5fYmF0Y2hJbmRleCA9IDA7XG4gICAgdGhpcy5fY2FsbGJhY2sgPSBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBQYXJzZXIgc3ByaXRlc2hlZXQgZnJvbSBsb2FkZWQgZGF0YS4gVGhpcyBpcyBkb25lIGFzeW5jaHJvbm91c2x5XG4gICAqIHRvIHByZXZlbnQgY3JlYXRpbmcgdG9vIG1hbnkgVGV4dHVyZSB3aXRoaW4gYSBzaW5nbGUgcHJvY2Vzcy5cbiAgICovXG4gIHBhcnNlKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5fY2FsbGJhY2sgPSByZXNvbHZlO1xuICAgICAgdGhpcy5fYmF0Y2hJbmRleCA9IDA7XG4gICAgICBpZiAodGhpcy5fZnJhbWVLZXlzLmxlbmd0aCA8PSBfU3ByaXRlc2hlZXQuQkFUQ0hfU0laRSkge1xuICAgICAgICB0aGlzLl9wcm9jZXNzRnJhbWVzKDApO1xuICAgICAgICB0aGlzLl9wcm9jZXNzQW5pbWF0aW9ucygpO1xuICAgICAgICB0aGlzLl9wYXJzZUNvbXBsZXRlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9uZXh0QmF0Y2goKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogUHJvY2VzcyBhIGJhdGNoIG9mIGZyYW1lc1xuICAgKiBAcGFyYW0gaW5pdGlhbEZyYW1lSW5kZXggLSBUaGUgaW5kZXggb2YgZnJhbWUgdG8gc3RhcnQuXG4gICAqL1xuICBfcHJvY2Vzc0ZyYW1lcyhpbml0aWFsRnJhbWVJbmRleCkge1xuICAgIGxldCBmcmFtZUluZGV4ID0gaW5pdGlhbEZyYW1lSW5kZXg7XG4gICAgY29uc3QgbWF4RnJhbWVzID0gX1Nwcml0ZXNoZWV0LkJBVENIX1NJWkU7XG4gICAgd2hpbGUgKGZyYW1lSW5kZXggLSBpbml0aWFsRnJhbWVJbmRleCA8IG1heEZyYW1lcyAmJiBmcmFtZUluZGV4IDwgdGhpcy5fZnJhbWVLZXlzLmxlbmd0aCkge1xuICAgICAgY29uc3QgaSA9IHRoaXMuX2ZyYW1lS2V5c1tmcmFtZUluZGV4XTtcbiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9mcmFtZXNbaV07XG4gICAgICBjb25zdCByZWN0ID0gZGF0YS5mcmFtZTtcbiAgICAgIGlmIChyZWN0KSB7XG4gICAgICAgIGxldCBmcmFtZSA9IG51bGw7XG4gICAgICAgIGxldCB0cmltID0gbnVsbDtcbiAgICAgICAgY29uc3Qgc291cmNlU2l6ZSA9IGRhdGEudHJpbW1lZCAhPT0gZmFsc2UgJiYgZGF0YS5zb3VyY2VTaXplID8gZGF0YS5zb3VyY2VTaXplIDogZGF0YS5mcmFtZTtcbiAgICAgICAgY29uc3Qgb3JpZyA9IG5ldyBSZWN0YW5nbGUoXG4gICAgICAgICAgMCxcbiAgICAgICAgICAwLFxuICAgICAgICAgIE1hdGguZmxvb3Ioc291cmNlU2l6ZS53KSAvIHRoaXMucmVzb2x1dGlvbixcbiAgICAgICAgICBNYXRoLmZsb29yKHNvdXJjZVNpemUuaCkgLyB0aGlzLnJlc29sdXRpb25cbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGRhdGEucm90YXRlZCkge1xuICAgICAgICAgIGZyYW1lID0gbmV3IFJlY3RhbmdsZShcbiAgICAgICAgICAgIE1hdGguZmxvb3IocmVjdC54KSAvIHRoaXMucmVzb2x1dGlvbixcbiAgICAgICAgICAgIE1hdGguZmxvb3IocmVjdC55KSAvIHRoaXMucmVzb2x1dGlvbixcbiAgICAgICAgICAgIE1hdGguZmxvb3IocmVjdC5oKSAvIHRoaXMucmVzb2x1dGlvbixcbiAgICAgICAgICAgIE1hdGguZmxvb3IocmVjdC53KSAvIHRoaXMucmVzb2x1dGlvblxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZnJhbWUgPSBuZXcgUmVjdGFuZ2xlKFxuICAgICAgICAgICAgTWF0aC5mbG9vcihyZWN0LngpIC8gdGhpcy5yZXNvbHV0aW9uLFxuICAgICAgICAgICAgTWF0aC5mbG9vcihyZWN0LnkpIC8gdGhpcy5yZXNvbHV0aW9uLFxuICAgICAgICAgICAgTWF0aC5mbG9vcihyZWN0LncpIC8gdGhpcy5yZXNvbHV0aW9uLFxuICAgICAgICAgICAgTWF0aC5mbG9vcihyZWN0LmgpIC8gdGhpcy5yZXNvbHV0aW9uXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YS50cmltbWVkICE9PSBmYWxzZSAmJiBkYXRhLnNwcml0ZVNvdXJjZVNpemUpIHtcbiAgICAgICAgICB0cmltID0gbmV3IFJlY3RhbmdsZShcbiAgICAgICAgICAgIE1hdGguZmxvb3IoZGF0YS5zcHJpdGVTb3VyY2VTaXplLngpIC8gdGhpcy5yZXNvbHV0aW9uLFxuICAgICAgICAgICAgTWF0aC5mbG9vcihkYXRhLnNwcml0ZVNvdXJjZVNpemUueSkgLyB0aGlzLnJlc29sdXRpb24sXG4gICAgICAgICAgICBNYXRoLmZsb29yKHJlY3QudykgLyB0aGlzLnJlc29sdXRpb24sXG4gICAgICAgICAgICBNYXRoLmZsb29yKHJlY3QuaCkgLyB0aGlzLnJlc29sdXRpb25cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGV4dHVyZXNbaV0gPSBuZXcgVGV4dHVyZSh7XG4gICAgICAgICAgc291cmNlOiB0aGlzLnRleHR1cmVTb3VyY2UsXG4gICAgICAgICAgZnJhbWUsXG4gICAgICAgICAgb3JpZyxcbiAgICAgICAgICB0cmltLFxuICAgICAgICAgIHJvdGF0ZTogZGF0YS5yb3RhdGVkID8gMiA6IDAsXG4gICAgICAgICAgZGVmYXVsdEFuY2hvcjogZGF0YS5hbmNob3IsXG4gICAgICAgICAgZGVmYXVsdEJvcmRlcnM6IGRhdGEuYm9yZGVycyxcbiAgICAgICAgICBsYWJlbDogaS50b1N0cmluZygpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZnJhbWVJbmRleCsrO1xuICAgIH1cbiAgfVxuICAvKiogUGFyc2UgYW5pbWF0aW9ucyBjb25maWcuICovXG4gIF9wcm9jZXNzQW5pbWF0aW9ucygpIHtcbiAgICBjb25zdCBhbmltYXRpb25zID0gdGhpcy5kYXRhLmFuaW1hdGlvbnMgfHwge307XG4gICAgZm9yIChjb25zdCBhbmltTmFtZSBpbiBhbmltYXRpb25zKSB7XG4gICAgICB0aGlzLmFuaW1hdGlvbnNbYW5pbU5hbWVdID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFuaW1hdGlvbnNbYW5pbU5hbWVdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZyYW1lTmFtZSA9IGFuaW1hdGlvbnNbYW5pbU5hbWVdW2ldO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbnNbYW5pbU5hbWVdLnB1c2godGhpcy50ZXh0dXJlc1tmcmFtZU5hbWVdKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqIFRoZSBwYXJzZSBoYXMgY29tcGxldGVkLiAqL1xuICBfcGFyc2VDb21wbGV0ZSgpIHtcbiAgICBjb25zdCBjYWxsYmFjayA9IHRoaXMuX2NhbGxiYWNrO1xuICAgIHRoaXMuX2NhbGxiYWNrID0gbnVsbDtcbiAgICB0aGlzLl9iYXRjaEluZGV4ID0gMDtcbiAgICBjYWxsYmFjay5jYWxsKHRoaXMsIHRoaXMudGV4dHVyZXMpO1xuICB9XG4gIC8qKiBCZWdpbiB0aGUgbmV4dCBiYXRjaCBvZiB0ZXh0dXJlcy4gKi9cbiAgX25leHRCYXRjaCgpIHtcbiAgICB0aGlzLl9wcm9jZXNzRnJhbWVzKHRoaXMuX2JhdGNoSW5kZXggKiBfU3ByaXRlc2hlZXQuQkFUQ0hfU0laRSk7XG4gICAgdGhpcy5fYmF0Y2hJbmRleCsrO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX2JhdGNoSW5kZXggKiBfU3ByaXRlc2hlZXQuQkFUQ0hfU0laRSA8IHRoaXMuX2ZyYW1lS2V5cy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5fbmV4dEJhdGNoKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9wcm9jZXNzQW5pbWF0aW9ucygpO1xuICAgICAgICB0aGlzLl9wYXJzZUNvbXBsZXRlKCk7XG4gICAgICB9XG4gICAgfSwgMCk7XG4gIH1cbiAgLyoqXG4gICAqIERlc3Ryb3kgU3ByaXRlc2hlZXQgYW5kIGRvbid0IHVzZSBhZnRlciB0aGlzLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtkZXN0cm95QmFzZT1mYWxzZV0gLSBXaGV0aGVyIHRvIGRlc3Ryb3kgdGhlIGJhc2UgdGV4dHVyZSBhcyB3ZWxsXG4gICAqL1xuICBkZXN0cm95KGRlc3Ryb3lCYXNlID0gZmFsc2UpIHtcbiAgICBmb3IgKGNvbnN0IGkgaW4gdGhpcy50ZXh0dXJlcykge1xuICAgICAgdGhpcy50ZXh0dXJlc1tpXS5kZXN0cm95KCk7XG4gICAgfVxuICAgIHRoaXMuX2ZyYW1lcyA9IG51bGw7XG4gICAgdGhpcy5fZnJhbWVLZXlzID0gbnVsbDtcbiAgICB0aGlzLmRhdGEgPSBudWxsO1xuICAgIHRoaXMudGV4dHVyZXMgPSBudWxsO1xuICAgIGlmIChkZXN0cm95QmFzZSkge1xuICAgICAgdGhpcy5fdGV4dHVyZT8uZGVzdHJveSgpO1xuICAgICAgdGhpcy50ZXh0dXJlU291cmNlLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgdGhpcy5fdGV4dHVyZSA9IG51bGw7XG4gICAgdGhpcy50ZXh0dXJlU291cmNlID0gbnVsbDtcbiAgICB0aGlzLmxpbmtlZFNoZWV0cyA9IFtdO1xuICB9XG59O1xuLyoqIFRoZSBtYXhpbXVtIG51bWJlciBvZiBUZXh0dXJlcyB0byBidWlsZCBwZXIgcHJvY2Vzcy4gKi9cbl9TcHJpdGVzaGVldC5CQVRDSF9TSVpFID0gMWUzO1xubGV0IFNwcml0ZXNoZWV0ID0gX1Nwcml0ZXNoZWV0O1xuXG5leHBvcnQgeyBTcHJpdGVzaGVldCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3ByaXRlc2hlZXQubWpzLm1hcFxuIiwiaW1wb3J0IHsgTG9hZGVyUGFyc2VyUHJpb3JpdHkgfSBmcm9tICcuLi9hc3NldHMvbG9hZGVyL3BhcnNlcnMvTG9hZGVyUGFyc2VyLm1qcyc7XG5pbXBvcnQgeyBSZXNvbHZlciB9IGZyb20gJy4uL2Fzc2V0cy9yZXNvbHZlci9SZXNvbHZlci5tanMnO1xuaW1wb3J0IHsgY29weVNlYXJjaFBhcmFtcyB9IGZyb20gJy4uL2Fzc2V0cy91dGlscy9jb3B5U2VhcmNoUGFyYW1zLm1qcyc7XG5pbXBvcnQgeyBFeHRlbnNpb25UeXBlIH0gZnJvbSAnLi4vZXh0ZW5zaW9ucy9FeHRlbnNpb25zLm1qcyc7XG5pbXBvcnQgeyBUZXh0dXJlIH0gZnJvbSAnLi4vcmVuZGVyaW5nL3JlbmRlcmVycy9zaGFyZWQvdGV4dHVyZS9UZXh0dXJlLm1qcyc7XG5pbXBvcnQgeyBwYXRoIH0gZnJvbSAnLi4vdXRpbHMvcGF0aC5tanMnO1xuaW1wb3J0IHsgU3ByaXRlc2hlZXQgfSBmcm9tICcuL1Nwcml0ZXNoZWV0Lm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY29uc3QgdmFsaWRJbWFnZXMgPSBbXG4gIFwianBnXCIsXG4gIFwicG5nXCIsXG4gIFwianBlZ1wiLFxuICBcImF2aWZcIixcbiAgXCJ3ZWJwXCIsXG4gIFwiYmFzaXNcIixcbiAgXCJldGMyXCIsXG4gIFwiYmM3XCIsXG4gIFwiYmM2aFwiLFxuICBcImJjNVwiLFxuICBcImJjNFwiLFxuICBcImJjM1wiLFxuICBcImJjMlwiLFxuICBcImJjMVwiLFxuICBcImVhY1wiLFxuICBcImFzdGNcIlxuXTtcbmZ1bmN0aW9uIGdldENhY2hlYWJsZUFzc2V0cyhrZXlzLCBhc3NldCwgaWdub3JlTXVsdGlQYWNrKSB7XG4gIGNvbnN0IG91dCA9IHt9O1xuICBrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgIG91dFtrZXldID0gYXNzZXQ7XG4gIH0pO1xuICBPYmplY3Qua2V5cyhhc3NldC50ZXh0dXJlcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgb3V0W2tleV0gPSBhc3NldC50ZXh0dXJlc1trZXldO1xuICB9KTtcbiAgaWYgKCFpZ25vcmVNdWx0aVBhY2spIHtcbiAgICBjb25zdCBiYXNlUGF0aCA9IHBhdGguZGlybmFtZShrZXlzWzBdKTtcbiAgICBhc3NldC5saW5rZWRTaGVldHMuZm9yRWFjaCgoaXRlbSwgaSkgPT4ge1xuICAgICAgY29uc3Qgb3V0MiA9IGdldENhY2hlYWJsZUFzc2V0cyhbYCR7YmFzZVBhdGh9LyR7YXNzZXQuZGF0YS5tZXRhLnJlbGF0ZWRfbXVsdGlfcGFja3NbaV19YF0sIGl0ZW0sIHRydWUpO1xuICAgICAgT2JqZWN0LmFzc2lnbihvdXQsIG91dDIpO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBvdXQ7XG59XG5jb25zdCBzcHJpdGVzaGVldEFzc2V0ID0ge1xuICBleHRlbnNpb246IEV4dGVuc2lvblR5cGUuQXNzZXQsXG4gIC8qKiBIYW5kbGUgdGhlIGNhY2hpbmcgb2YgdGhlIHJlbGF0ZWQgU3ByaXRlc2hlZXQgVGV4dHVyZXMgKi9cbiAgY2FjaGU6IHtcbiAgICB0ZXN0OiAoYXNzZXQpID0+IGFzc2V0IGluc3RhbmNlb2YgU3ByaXRlc2hlZXQsXG4gICAgZ2V0Q2FjaGVhYmxlQXNzZXRzOiAoa2V5cywgYXNzZXQpID0+IGdldENhY2hlYWJsZUFzc2V0cyhrZXlzLCBhc3NldCwgZmFsc2UpXG4gIH0sXG4gIC8qKiBSZXNvbHZlIHRoZSByZXNvbHV0aW9uIG9mIHRoZSBhc3NldC4gKi9cbiAgcmVzb2x2ZXI6IHtcbiAgICBleHRlbnNpb246IHtcbiAgICAgIHR5cGU6IEV4dGVuc2lvblR5cGUuUmVzb2x2ZVBhcnNlcixcbiAgICAgIG5hbWU6IFwicmVzb2x2ZVNwcml0ZXNoZWV0XCJcbiAgICB9LFxuICAgIHRlc3Q6ICh2YWx1ZSkgPT4ge1xuICAgICAgY29uc3QgdGVtcFVSTCA9IHZhbHVlLnNwbGl0KFwiP1wiKVswXTtcbiAgICAgIGNvbnN0IHNwbGl0ID0gdGVtcFVSTC5zcGxpdChcIi5cIik7XG4gICAgICBjb25zdCBleHRlbnNpb24gPSBzcGxpdC5wb3AoKTtcbiAgICAgIGNvbnN0IGZvcm1hdCA9IHNwbGl0LnBvcCgpO1xuICAgICAgcmV0dXJuIGV4dGVuc2lvbiA9PT0gXCJqc29uXCIgJiYgdmFsaWRJbWFnZXMuaW5jbHVkZXMoZm9ybWF0KTtcbiAgICB9LFxuICAgIHBhcnNlOiAodmFsdWUpID0+IHtcbiAgICAgIGNvbnN0IHNwbGl0ID0gdmFsdWUuc3BsaXQoXCIuXCIpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzb2x1dGlvbjogcGFyc2VGbG9hdChSZXNvbHZlci5SRVRJTkFfUFJFRklYLmV4ZWModmFsdWUpPy5bMV0gPz8gXCIxXCIpLFxuICAgICAgICBmb3JtYXQ6IHNwbGl0W3NwbGl0Lmxlbmd0aCAtIDJdLFxuICAgICAgICBzcmM6IHZhbHVlXG4gICAgICB9O1xuICAgIH1cbiAgfSxcbiAgLyoqXG4gICAqIExvYWRlciBwbHVnaW4gdGhhdCBwYXJzZXMgc3ByaXRlIHNoZWV0cyFcbiAgICogb25jZSB0aGUgSlNPTiBoYXMgYmVlbiBsb2FkZWQgdGhpcyBjaGVja3MgdG8gc2VlIGlmIHRoZSBKU09OIGlzIHNwcml0ZXNoZWV0IGRhdGEuXG4gICAqIElmIGl0IGlzLCB3ZSBsb2FkIHRoZSBzcHJpdGVzaGVldHMgaW1hZ2UgYW5kIHBhcnNlIHRoZSBkYXRhIGludG8gU3ByaXRlc2hlZXRcbiAgICogQWxsIHRleHR1cmVzIGluIHRoZSBzcHJpdGUgc2hlZXQgYXJlIHRoZW4gYWRkZWQgdG8gdGhlIGNhY2hlXG4gICAqL1xuICBsb2FkZXI6IHtcbiAgICBuYW1lOiBcInNwcml0ZXNoZWV0TG9hZGVyXCIsXG4gICAgZXh0ZW5zaW9uOiB7XG4gICAgICB0eXBlOiBFeHRlbnNpb25UeXBlLkxvYWRQYXJzZXIsXG4gICAgICBwcmlvcml0eTogTG9hZGVyUGFyc2VyUHJpb3JpdHkuTm9ybWFsLFxuICAgICAgbmFtZTogXCJzcHJpdGVzaGVldExvYWRlclwiXG4gICAgfSxcbiAgICBhc3luYyB0ZXN0UGFyc2UoYXNzZXQsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiBwYXRoLmV4dG5hbWUob3B0aW9ucy5zcmMpLnRvTG93ZXJDYXNlKCkgPT09IFwiLmpzb25cIiAmJiAhIWFzc2V0LmZyYW1lcztcbiAgICB9LFxuICAgIGFzeW5jIHBhcnNlKGFzc2V0LCBvcHRpb25zLCBsb2FkZXIpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgdGV4dHVyZTogaW1hZ2VUZXh0dXJlLFxuICAgICAgICAvLyBpZiB1c2VyIG5lZWQgdG8gdXNlIHByZWxvYWRlZCB0ZXh0dXJlXG4gICAgICAgIGltYWdlRmlsZW5hbWVcbiAgICAgICAgLy8gaWYgdXNlciBuZWVkIHRvIHVzZSBjdXN0b20gZmlsZW5hbWUgKG5vdCBmcm9tIGpzb25GaWxlLm1ldGEuaW1hZ2UpXG4gICAgICB9ID0gb3B0aW9ucz8uZGF0YSA/PyB7fTtcbiAgICAgIGxldCBiYXNlUGF0aCA9IHBhdGguZGlybmFtZShvcHRpb25zLnNyYyk7XG4gICAgICBpZiAoYmFzZVBhdGggJiYgYmFzZVBhdGgubGFzdEluZGV4T2YoXCIvXCIpICE9PSBiYXNlUGF0aC5sZW5ndGggLSAxKSB7XG4gICAgICAgIGJhc2VQYXRoICs9IFwiL1wiO1xuICAgICAgfVxuICAgICAgbGV0IHRleHR1cmU7XG4gICAgICBpZiAoaW1hZ2VUZXh0dXJlIGluc3RhbmNlb2YgVGV4dHVyZSkge1xuICAgICAgICB0ZXh0dXJlID0gaW1hZ2VUZXh0dXJlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgaW1hZ2VQYXRoID0gY29weVNlYXJjaFBhcmFtcyhiYXNlUGF0aCArIChpbWFnZUZpbGVuYW1lID8/IGFzc2V0Lm1ldGEuaW1hZ2UpLCBvcHRpb25zLnNyYyk7XG4gICAgICAgIGNvbnN0IGFzc2V0cyA9IGF3YWl0IGxvYWRlci5sb2FkKFtpbWFnZVBhdGhdKTtcbiAgICAgICAgdGV4dHVyZSA9IGFzc2V0c1tpbWFnZVBhdGhdO1xuICAgICAgfVxuICAgICAgY29uc3Qgc3ByaXRlc2hlZXQgPSBuZXcgU3ByaXRlc2hlZXQoXG4gICAgICAgIHRleHR1cmUuc291cmNlLFxuICAgICAgICBhc3NldFxuICAgICAgKTtcbiAgICAgIGF3YWl0IHNwcml0ZXNoZWV0LnBhcnNlKCk7XG4gICAgICBjb25zdCBtdWx0aVBhY2tzID0gYXNzZXQ/Lm1ldGE/LnJlbGF0ZWRfbXVsdGlfcGFja3M7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShtdWx0aVBhY2tzKSkge1xuICAgICAgICBjb25zdCBwcm9taXNlcyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgbXVsdGlQYWNrcykge1xuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBpdGVtVXJsID0gYmFzZVBhdGggKyBpdGVtO1xuICAgICAgICAgIGlmIChvcHRpb25zLmRhdGE/Lmlnbm9yZU11bHRpUGFjaykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW1VcmwgPSBjb3B5U2VhcmNoUGFyYW1zKGl0ZW1VcmwsIG9wdGlvbnMuc3JjKTtcbiAgICAgICAgICBwcm9taXNlcy5wdXNoKGxvYWRlci5sb2FkKHtcbiAgICAgICAgICAgIHNyYzogaXRlbVVybCxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgaWdub3JlTXVsdGlQYWNrOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICAgICAgc3ByaXRlc2hlZXQubGlua2VkU2hlZXRzID0gcmVzO1xuICAgICAgICByZXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgIGl0ZW0ubGlua2VkU2hlZXRzID0gW3Nwcml0ZXNoZWV0XS5jb25jYXQoc3ByaXRlc2hlZXQubGlua2VkU2hlZXRzLmZpbHRlcigoc3ApID0+IHNwICE9PSBpdGVtKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNwcml0ZXNoZWV0O1xuICAgIH0sXG4gICAgYXN5bmMgdW5sb2FkKHNwcml0ZXNoZWV0LCBfcmVzb2x2ZWRBc3NldCwgbG9hZGVyKSB7XG4gICAgICBhd2FpdCBsb2FkZXIudW5sb2FkKHNwcml0ZXNoZWV0LnRleHR1cmVTb3VyY2UuX3NvdXJjZU9yaWdpbik7XG4gICAgICBzcHJpdGVzaGVldC5kZXN0cm95KGZhbHNlKTtcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydCB7IHNwcml0ZXNoZWV0QXNzZXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNwcml0ZXNoZWV0QXNzZXQubWpzLm1hcFxuIiwiaW1wb3J0IHsgZXh0ZW5zaW9ucyB9IGZyb20gJy4uL2V4dGVuc2lvbnMvRXh0ZW5zaW9ucy5tanMnO1xuaW1wb3J0IHsgc3ByaXRlc2hlZXRBc3NldCB9IGZyb20gJy4vc3ByaXRlc2hlZXRBc3NldC5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmV4dGVuc2lvbnMuYWRkKHNwcml0ZXNoZWV0QXNzZXQpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5pdC5tanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbmNsYXNzIFRpY2tlckxpc3RlbmVyIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdG9yXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSBmbiAtIFRoZSBsaXN0ZW5lciBmdW5jdGlvbiB0byBiZSBhZGRlZCBmb3Igb25lIHVwZGF0ZVxuICAgKiBAcGFyYW0gY29udGV4dCAtIFRoZSBsaXN0ZW5lciBjb250ZXh0XG4gICAqIEBwYXJhbSBwcmlvcml0eSAtIFRoZSBwcmlvcml0eSBmb3IgZW1pdHRpbmdcbiAgICogQHBhcmFtIG9uY2UgLSBJZiB0aGUgaGFuZGxlciBzaG91bGQgZmlyZSBvbmNlXG4gICAqL1xuICBjb25zdHJ1Y3RvcihmbiwgY29udGV4dCA9IG51bGwsIHByaW9yaXR5ID0gMCwgb25jZSA9IGZhbHNlKSB7XG4gICAgLyoqIFRoZSBuZXh0IGl0ZW0gaW4gY2hhaW4uICovXG4gICAgdGhpcy5uZXh0ID0gbnVsbDtcbiAgICAvKiogVGhlIHByZXZpb3VzIGl0ZW0gaW4gY2hhaW4uICovXG4gICAgdGhpcy5wcmV2aW91cyA9IG51bGw7XG4gICAgLyoqIGB0cnVlYCBpZiB0aGlzIGxpc3RlbmVyIGhhcyBiZWVuIGRlc3Ryb3llZCBhbHJlYWR5LiAqL1xuICAgIHRoaXMuX2Rlc3Ryb3llZCA9IGZhbHNlO1xuICAgIHRoaXMuX2ZuID0gZm47XG4gICAgdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7XG4gICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgIHRoaXMuX29uY2UgPSBvbmNlO1xuICB9XG4gIC8qKlxuICAgKiBTaW1wbGUgY29tcGFyZSBmdW5jdGlvbiB0byBmaWd1cmUgb3V0IGlmIGEgZnVuY3Rpb24gYW5kIGNvbnRleHQgbWF0Y2guXG4gICAqIEBwYXJhbSBmbiAtIFRoZSBsaXN0ZW5lciBmdW5jdGlvbiB0byBiZSBhZGRlZCBmb3Igb25lIHVwZGF0ZVxuICAgKiBAcGFyYW0gY29udGV4dCAtIFRoZSBsaXN0ZW5lciBjb250ZXh0XG4gICAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgbGlzdGVuZXIgbWF0Y2ggdGhlIGFyZ3VtZW50c1xuICAgKi9cbiAgbWF0Y2goZm4sIGNvbnRleHQgPSBudWxsKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZuID09PSBmbiAmJiB0aGlzLl9jb250ZXh0ID09PSBjb250ZXh0O1xuICB9XG4gIC8qKlxuICAgKiBFbWl0IGJ5IGNhbGxpbmcgdGhlIGN1cnJlbnQgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSB0aWNrZXIgLSBUaGUgdGlja2VyIGVtaXR0aW5nLlxuICAgKiBAcmV0dXJucyBOZXh0IHRpY2tlclxuICAgKi9cbiAgZW1pdCh0aWNrZXIpIHtcbiAgICBpZiAodGhpcy5fZm4pIHtcbiAgICAgIGlmICh0aGlzLl9jb250ZXh0KSB7XG4gICAgICAgIHRoaXMuX2ZuLmNhbGwodGhpcy5fY29udGV4dCwgdGlja2VyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2ZuKHRpY2tlcik7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJlZGlyZWN0ID0gdGhpcy5uZXh0O1xuICAgIGlmICh0aGlzLl9vbmNlKSB7XG4gICAgICB0aGlzLmRlc3Ryb3kodHJ1ZSk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9kZXN0cm95ZWQpIHtcbiAgICAgIHRoaXMubmV4dCA9IG51bGw7XG4gICAgfVxuICAgIHJldHVybiByZWRpcmVjdDtcbiAgfVxuICAvKipcbiAgICogQ29ubmVjdCB0byB0aGUgbGlzdC5cbiAgICogQHBhcmFtIHByZXZpb3VzIC0gSW5wdXQgbm9kZSwgcHJldmlvdXMgbGlzdGVuZXJcbiAgICovXG4gIGNvbm5lY3QocHJldmlvdXMpIHtcbiAgICB0aGlzLnByZXZpb3VzID0gcHJldmlvdXM7XG4gICAgaWYgKHByZXZpb3VzLm5leHQpIHtcbiAgICAgIHByZXZpb3VzLm5leHQucHJldmlvdXMgPSB0aGlzO1xuICAgIH1cbiAgICB0aGlzLm5leHQgPSBwcmV2aW91cy5uZXh0O1xuICAgIHByZXZpb3VzLm5leHQgPSB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBEZXN0cm95IGFuZCBkb24ndCB1c2UgYWZ0ZXIgdGhpcy5cbiAgICogQHBhcmFtIGhhcmQgLSBgdHJ1ZWAgdG8gcmVtb3ZlIHRoZSBgbmV4dGAgcmVmZXJlbmNlLCB0aGlzXG4gICAqICAgICAgICBpcyBjb25zaWRlcmVkIGEgaGFyZCBkZXN0cm95LiBTb2Z0IGRlc3Ryb3kgbWFpbnRhaW5zIHRoZSBuZXh0IHJlZmVyZW5jZS5cbiAgICogQHJldHVybnMgVGhlIGxpc3RlbmVyIHRvIHJlZGlyZWN0IHdoaWxlIGVtaXR0aW5nIG9yIHJlbW92aW5nLlxuICAgKi9cbiAgZGVzdHJveShoYXJkID0gZmFsc2UpIHtcbiAgICB0aGlzLl9kZXN0cm95ZWQgPSB0cnVlO1xuICAgIHRoaXMuX2ZuID0gbnVsbDtcbiAgICB0aGlzLl9jb250ZXh0ID0gbnVsbDtcbiAgICBpZiAodGhpcy5wcmV2aW91cykge1xuICAgICAgdGhpcy5wcmV2aW91cy5uZXh0ID0gdGhpcy5uZXh0O1xuICAgIH1cbiAgICBpZiAodGhpcy5uZXh0KSB7XG4gICAgICB0aGlzLm5leHQucHJldmlvdXMgPSB0aGlzLnByZXZpb3VzO1xuICAgIH1cbiAgICBjb25zdCByZWRpcmVjdCA9IHRoaXMubmV4dDtcbiAgICB0aGlzLm5leHQgPSBoYXJkID8gbnVsbCA6IHJlZGlyZWN0O1xuICAgIHRoaXMucHJldmlvdXMgPSBudWxsO1xuICAgIHJldHVybiByZWRpcmVjdDtcbiAgfVxufVxuXG5leHBvcnQgeyBUaWNrZXJMaXN0ZW5lciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlja2VyTGlzdGVuZXIubWpzLm1hcFxuIiwiaW1wb3J0IHsgVVBEQVRFX1BSSU9SSVRZIH0gZnJvbSAnLi9jb25zdC5tanMnO1xuaW1wb3J0IHsgVGlja2VyTGlzdGVuZXIgfSBmcm9tICcuL1RpY2tlckxpc3RlbmVyLm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY29uc3QgX1RpY2tlciA9IGNsYXNzIF9UaWNrZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIG9yIG5vdCB0aGlzIHRpY2tlciBzaG91bGQgaW52b2tlIHRoZSBtZXRob2RcbiAgICAgKiB7QGxpbmsgdGlja2VyLlRpY2tlciNzdGFydHxzdGFydH0gYXV0b21hdGljYWxseSB3aGVuIGEgbGlzdGVuZXIgaXMgYWRkZWQuXG4gICAgICovXG4gICAgdGhpcy5hdXRvU3RhcnQgPSBmYWxzZTtcbiAgICAvKipcbiAgICAgKiBTY2FsYXIgdGltZSB2YWx1ZSBmcm9tIGxhc3QgZnJhbWUgdG8gdGhpcyBmcmFtZS5cbiAgICAgKiBUaGlzIHZhbHVlIGlzIGNhcHBlZCBieSBzZXR0aW5nIHtAbGluayB0aWNrZXIuVGlja2VyI21pbkZQU3xtaW5GUFN9XG4gICAgICogYW5kIGlzIHNjYWxlZCB3aXRoIHtAbGluayB0aWNrZXIuVGlja2VyI3NwZWVkfHNwZWVkfS5cbiAgICAgKiAqKk5vdGU6KiogVGhlIGNhcCBtYXkgYmUgZXhjZWVkZWQgYnkgc2NhbGluZy5cbiAgICAgKi9cbiAgICB0aGlzLmRlbHRhVGltZSA9IDE7XG4gICAgLyoqXG4gICAgICogVGhlIGxhc3QgdGltZSB7QGxpbmsgdGlja2VyLlRpY2tlciN1cGRhdGV8dXBkYXRlfSB3YXMgaW52b2tlZC5cbiAgICAgKiBUaGlzIHZhbHVlIGlzIGFsc28gcmVzZXQgaW50ZXJuYWxseSBvdXRzaWRlIG9mIGludm9raW5nXG4gICAgICogdXBkYXRlLCBidXQgb25seSB3aGVuIGEgbmV3IGFuaW1hdGlvbiBmcmFtZSBpcyByZXF1ZXN0ZWQuXG4gICAgICogSWYgdGhlIHBsYXRmb3JtIHN1cHBvcnRzIERPTUhpZ2hSZXNUaW1lU3RhbXAsXG4gICAgICogdGhpcyB2YWx1ZSB3aWxsIGhhdmUgYSBwcmVjaXNpb24gb2YgMSDCtXMuXG4gICAgICovXG4gICAgdGhpcy5sYXN0VGltZSA9IC0xO1xuICAgIC8qKlxuICAgICAqIEZhY3RvciBvZiBjdXJyZW50IHtAbGluayB0aWNrZXIuVGlja2VyI2RlbHRhVGltZXxkZWx0YVRpbWV9LlxuICAgICAqIEBleGFtcGxlXG4gICAgICogLy8gU2NhbGVzIHRpY2tlci5kZWx0YVRpbWUgdG8gd2hhdCB3b3VsZCBiZVxuICAgICAqIC8vIHRoZSBlcXVpdmFsZW50IG9mIGFwcHJveGltYXRlbHkgMTIwIEZQU1xuICAgICAqIHRpY2tlci5zcGVlZCA9IDI7XG4gICAgICovXG4gICAgdGhpcy5zcGVlZCA9IDE7XG4gICAgLyoqXG4gICAgICogV2hldGhlciBvciBub3QgdGhpcyB0aWNrZXIgaGFzIGJlZW4gc3RhcnRlZC5cbiAgICAgKiBgdHJ1ZWAgaWYge0BsaW5rIHRpY2tlci5UaWNrZXIjc3RhcnR8c3RhcnR9IGhhcyBiZWVuIGNhbGxlZC5cbiAgICAgKiBgZmFsc2VgIGlmIHtAbGluayB0aWNrZXIuVGlja2VyI3N0b3B8U3RvcH0gaGFzIGJlZW4gY2FsbGVkLlxuICAgICAqIFdoaWxlIGBmYWxzZWAsIHRoaXMgdmFsdWUgbWF5IGNoYW5nZSB0byBgdHJ1ZWAgaW4gdGhlXG4gICAgICogZXZlbnQgb2Yge0BsaW5rIHRpY2tlci5UaWNrZXIjYXV0b1N0YXJ0fGF1dG9TdGFydH0gYmVpbmcgYHRydWVgXG4gICAgICogYW5kIGEgbGlzdGVuZXIgaXMgYWRkZWQuXG4gICAgICovXG4gICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgLyoqIEludGVybmFsIGN1cnJlbnQgZnJhbWUgcmVxdWVzdCBJRCAqL1xuICAgIHRoaXMuX3JlcXVlc3RJZCA9IG51bGw7XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgdmFsdWUgbWFuYWdlZCBieSBtaW5GUFMgcHJvcGVydHkgc2V0dGVyIGFuZCBnZXR0ZXIuXG4gICAgICogVGhpcyBpcyB0aGUgbWF4aW11bSBhbGxvd2VkIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIHVwZGF0ZXMuXG4gICAgICovXG4gICAgdGhpcy5fbWF4RWxhcHNlZE1TID0gMTAwO1xuICAgIC8qKlxuICAgICAqIEludGVybmFsIHZhbHVlIG1hbmFnZWQgYnkgbWluRlBTIHByb3BlcnR5IHNldHRlciBhbmQgZ2V0dGVyLlxuICAgICAqIFRoaXMgaXMgdGhlIG1pbmltdW0gYWxsb3dlZCBtaWxsaXNlY29uZHMgYmV0d2VlbiB1cGRhdGVzLlxuICAgICAqL1xuICAgIHRoaXMuX21pbkVsYXBzZWRNUyA9IDA7XG4gICAgLyoqIElmIGVuYWJsZWQsIGRlbGV0aW5nIGlzIGRpc2FibGVkLiovXG4gICAgdGhpcy5fcHJvdGVjdGVkID0gZmFsc2U7XG4gICAgLyoqIFRoZSBsYXN0IHRpbWUga2V5ZnJhbWUgd2FzIGV4ZWN1dGVkLiBNYWludGFpbnMgYSByZWxhdGl2ZWx5IGZpeGVkIGludGVydmFsIHdpdGggdGhlIHByZXZpb3VzIHZhbHVlLiAqL1xuICAgIHRoaXMuX2xhc3RGcmFtZSA9IC0xO1xuICAgIHRoaXMuX2hlYWQgPSBuZXcgVGlja2VyTGlzdGVuZXIobnVsbCwgbnVsbCwgSW5maW5pdHkpO1xuICAgIHRoaXMuZGVsdGFNUyA9IDEgLyBfVGlja2VyLnRhcmdldEZQTVM7XG4gICAgdGhpcy5lbGFwc2VkTVMgPSAxIC8gX1RpY2tlci50YXJnZXRGUE1TO1xuICAgIHRoaXMuX3RpY2sgPSAodGltZSkgPT4ge1xuICAgICAgdGhpcy5fcmVxdWVzdElkID0gbnVsbDtcbiAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgdGhpcy51cGRhdGUodGltZSk7XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQgJiYgdGhpcy5fcmVxdWVzdElkID09PSBudWxsICYmIHRoaXMuX2hlYWQubmV4dCkge1xuICAgICAgICAgIHRoaXMuX3JlcXVlc3RJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLl90aWNrKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIENvbmRpdGlvbmFsbHkgcmVxdWVzdHMgYSBuZXcgYW5pbWF0aW9uIGZyYW1lLlxuICAgKiBJZiBhIGZyYW1lIGhhcyBub3QgYWxyZWFkeSBiZWVuIHJlcXVlc3RlZCwgYW5kIGlmIHRoZSBpbnRlcm5hbFxuICAgKiBlbWl0dGVyIGhhcyBsaXN0ZW5lcnMsIGEgbmV3IGZyYW1lIGlzIHJlcXVlc3RlZC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZXF1ZXN0SWZOZWVkZWQoKSB7XG4gICAgaWYgKHRoaXMuX3JlcXVlc3RJZCA9PT0gbnVsbCAmJiB0aGlzLl9oZWFkLm5leHQpIHtcbiAgICAgIHRoaXMubGFzdFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIHRoaXMuX2xhc3RGcmFtZSA9IHRoaXMubGFzdFRpbWU7XG4gICAgICB0aGlzLl9yZXF1ZXN0SWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5fdGljayk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDb25kaXRpb25hbGx5IGNhbmNlbHMgYSBwZW5kaW5nIGFuaW1hdGlvbiBmcmFtZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9jYW5jZWxJZk5lZWRlZCgpIHtcbiAgICBpZiAodGhpcy5fcmVxdWVzdElkICE9PSBudWxsKSB7XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9yZXF1ZXN0SWQpO1xuICAgICAgdGhpcy5fcmVxdWVzdElkID0gbnVsbDtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvbmRpdGlvbmFsbHkgcmVxdWVzdHMgYSBuZXcgYW5pbWF0aW9uIGZyYW1lLlxuICAgKiBJZiB0aGUgdGlja2VyIGhhcyBiZWVuIHN0YXJ0ZWQgaXQgY2hlY2tzIGlmIGEgZnJhbWUgaGFzIG5vdCBhbHJlYWR5XG4gICAqIGJlZW4gcmVxdWVzdGVkLCBhbmQgaWYgdGhlIGludGVybmFsIGVtaXR0ZXIgaGFzIGxpc3RlbmVycy4gSWYgdGhlc2VcbiAgICogY29uZGl0aW9ucyBhcmUgbWV0LCBhIG5ldyBmcmFtZSBpcyByZXF1ZXN0ZWQuIElmIHRoZSB0aWNrZXIgaGFzIG5vdFxuICAgKiBiZWVuIHN0YXJ0ZWQsIGJ1dCBhdXRvU3RhcnQgaXMgYHRydWVgLCB0aGVuIHRoZSB0aWNrZXIgc3RhcnRzIG5vdyxcbiAgICogYW5kIGNvbnRpbnVlcyB3aXRoIHRoZSBwcmV2aW91cyBjb25kaXRpb25zIHRvIHJlcXVlc3QgYSBuZXcgZnJhbWUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfc3RhcnRJZlBvc3NpYmxlKCkge1xuICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgIHRoaXMuX3JlcXVlc3RJZk5lZWRlZCgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5hdXRvU3RhcnQpIHtcbiAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgaGFuZGxlciBmb3IgdGljayBldmVudHMuIENhbGxzIGNvbnRpbnVvdXNseSB1bmxlc3NcbiAgICogaXQgaXMgcmVtb3ZlZCBvciB0aGUgdGlja2VyIGlzIHN0b3BwZWQuXG4gICAqIEBwYXJhbSBmbiAtIFRoZSBsaXN0ZW5lciBmdW5jdGlvbiB0byBiZSBhZGRlZCBmb3IgdXBkYXRlc1xuICAgKiBAcGFyYW0gY29udGV4dCAtIFRoZSBsaXN0ZW5lciBjb250ZXh0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbcHJpb3JpdHk9VVBEQVRFX1BSSU9SSVRZLk5PUk1BTF0gLSBUaGUgcHJpb3JpdHkgZm9yIGVtaXR0aW5nXG4gICAqIEByZXR1cm5zIFRoaXMgaW5zdGFuY2Ugb2YgYSB0aWNrZXJcbiAgICovXG4gIGFkZChmbiwgY29udGV4dCwgcHJpb3JpdHkgPSBVUERBVEVfUFJJT1JJVFkuTk9STUFMKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FkZExpc3RlbmVyKG5ldyBUaWNrZXJMaXN0ZW5lcihmbiwgY29udGV4dCwgcHJpb3JpdHkpKTtcbiAgfVxuICAvKipcbiAgICogQWRkIGEgaGFuZGxlciBmb3IgdGhlIHRpY2sgZXZlbnQgd2hpY2ggaXMgb25seSBleGVjdXRlIG9uY2UuXG4gICAqIEBwYXJhbSBmbiAtIFRoZSBsaXN0ZW5lciBmdW5jdGlvbiB0byBiZSBhZGRlZCBmb3Igb25lIHVwZGF0ZVxuICAgKiBAcGFyYW0gY29udGV4dCAtIFRoZSBsaXN0ZW5lciBjb250ZXh0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbcHJpb3JpdHk9VVBEQVRFX1BSSU9SSVRZLk5PUk1BTF0gLSBUaGUgcHJpb3JpdHkgZm9yIGVtaXR0aW5nXG4gICAqIEByZXR1cm5zIFRoaXMgaW5zdGFuY2Ugb2YgYSB0aWNrZXJcbiAgICovXG4gIGFkZE9uY2UoZm4sIGNvbnRleHQsIHByaW9yaXR5ID0gVVBEQVRFX1BSSU9SSVRZLk5PUk1BTCkge1xuICAgIHJldHVybiB0aGlzLl9hZGRMaXN0ZW5lcihuZXcgVGlja2VyTGlzdGVuZXIoZm4sIGNvbnRleHQsIHByaW9yaXR5LCB0cnVlKSk7XG4gIH1cbiAgLyoqXG4gICAqIEludGVybmFsbHkgYWRkcyB0aGUgZXZlbnQgaGFuZGxlciBzbyB0aGF0IGl0IGNhbiBiZSBzb3J0ZWQgYnkgcHJpb3JpdHkuXG4gICAqIFByaW9yaXR5IGFsbG93cyBjZXJ0YWluIGhhbmRsZXIgKHVzZXIsIEFuaW1hdGVkU3ByaXRlLCBJbnRlcmFjdGlvbikgdG8gYmUgcnVuXG4gICAqIGJlZm9yZSB0aGUgcmVuZGVyaW5nLlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0gbGlzdGVuZXIgLSBDdXJyZW50IGxpc3RlbmVyIGJlaW5nIGFkZGVkLlxuICAgKiBAcmV0dXJucyBUaGlzIGluc3RhbmNlIG9mIGEgdGlja2VyXG4gICAqL1xuICBfYWRkTGlzdGVuZXIobGlzdGVuZXIpIHtcbiAgICBsZXQgY3VycmVudCA9IHRoaXMuX2hlYWQubmV4dDtcbiAgICBsZXQgcHJldmlvdXMgPSB0aGlzLl9oZWFkO1xuICAgIGlmICghY3VycmVudCkge1xuICAgICAgbGlzdGVuZXIuY29ubmVjdChwcmV2aW91cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdoaWxlIChjdXJyZW50KSB7XG4gICAgICAgIGlmIChsaXN0ZW5lci5wcmlvcml0eSA+IGN1cnJlbnQucHJpb3JpdHkpIHtcbiAgICAgICAgICBsaXN0ZW5lci5jb25uZWN0KHByZXZpb3VzKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBwcmV2aW91cyA9IGN1cnJlbnQ7XG4gICAgICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQ7XG4gICAgICB9XG4gICAgICBpZiAoIWxpc3RlbmVyLnByZXZpb3VzKSB7XG4gICAgICAgIGxpc3RlbmVyLmNvbm5lY3QocHJldmlvdXMpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9zdGFydElmUG9zc2libGUoKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlcyBhbnkgaGFuZGxlcnMgbWF0Y2hpbmcgdGhlIGZ1bmN0aW9uIGFuZCBjb250ZXh0IHBhcmFtZXRlcnMuXG4gICAqIElmIG5vIGhhbmRsZXJzIGFyZSBsZWZ0IGFmdGVyIHJlbW92aW5nLCB0aGVuIGl0IGNhbmNlbHMgdGhlIGFuaW1hdGlvbiBmcmFtZS5cbiAgICogQHBhcmFtIGZuIC0gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uIHRvIGJlIHJlbW92ZWRcbiAgICogQHBhcmFtIGNvbnRleHQgLSBUaGUgbGlzdGVuZXIgY29udGV4dCB0byBiZSByZW1vdmVkXG4gICAqIEByZXR1cm5zIFRoaXMgaW5zdGFuY2Ugb2YgYSB0aWNrZXJcbiAgICovXG4gIHJlbW92ZShmbiwgY29udGV4dCkge1xuICAgIGxldCBsaXN0ZW5lciA9IHRoaXMuX2hlYWQubmV4dDtcbiAgICB3aGlsZSAobGlzdGVuZXIpIHtcbiAgICAgIGlmIChsaXN0ZW5lci5tYXRjaChmbiwgY29udGV4dCkpIHtcbiAgICAgICAgbGlzdGVuZXIgPSBsaXN0ZW5lci5kZXN0cm95KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaXN0ZW5lciA9IGxpc3RlbmVyLm5leHQ7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5faGVhZC5uZXh0KSB7XG4gICAgICB0aGlzLl9jYW5jZWxJZk5lZWRlZCgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBsaXN0ZW5lcnMgb24gdGhpcyB0aWNrZXIsIGNhbGN1bGF0ZWQgYnkgd2Fsa2luZyB0aHJvdWdoIGxpbmtlZCBsaXN0XG4gICAqIEByZWFkb25seVxuICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgY291bnQoKSB7XG4gICAgaWYgKCF0aGlzLl9oZWFkKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgbGV0IGNvdW50ID0gMDtcbiAgICBsZXQgY3VycmVudCA9IHRoaXMuX2hlYWQ7XG4gICAgd2hpbGUgKGN1cnJlbnQgPSBjdXJyZW50Lm5leHQpIHtcbiAgICAgIGNvdW50Kys7XG4gICAgfVxuICAgIHJldHVybiBjb3VudDtcbiAgfVxuICAvKiogU3RhcnRzIHRoZSB0aWNrZXIuIElmIHRoZSB0aWNrZXIgaGFzIGxpc3RlbmVycyBhIG5ldyBhbmltYXRpb24gZnJhbWUgaXMgcmVxdWVzdGVkIGF0IHRoaXMgcG9pbnQuICovXG4gIHN0YXJ0KCkge1xuICAgIGlmICghdGhpcy5zdGFydGVkKSB7XG4gICAgICB0aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fcmVxdWVzdElmTmVlZGVkKCk7XG4gICAgfVxuICB9XG4gIC8qKiBTdG9wcyB0aGUgdGlja2VyLiBJZiB0aGUgdGlja2VyIGhhcyByZXF1ZXN0ZWQgYW4gYW5pbWF0aW9uIGZyYW1lIGl0IGlzIGNhbmNlbGVkIGF0IHRoaXMgcG9pbnQuICovXG4gIHN0b3AoKSB7XG4gICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9jYW5jZWxJZk5lZWRlZCgpO1xuICAgIH1cbiAgfVxuICAvKiogRGVzdHJveSB0aGUgdGlja2VyIGFuZCBkb24ndCB1c2UgYWZ0ZXIgdGhpcy4gQ2FsbGluZyB0aGlzIG1ldGhvZCByZW1vdmVzIGFsbCByZWZlcmVuY2VzIHRvIGludGVybmFsIGV2ZW50cy4gKi9cbiAgZGVzdHJveSgpIHtcbiAgICBpZiAoIXRoaXMuX3Byb3RlY3RlZCkge1xuICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICBsZXQgbGlzdGVuZXIgPSB0aGlzLl9oZWFkLm5leHQ7XG4gICAgICB3aGlsZSAobGlzdGVuZXIpIHtcbiAgICAgICAgbGlzdGVuZXIgPSBsaXN0ZW5lci5kZXN0cm95KHRydWUpO1xuICAgICAgfVxuICAgICAgdGhpcy5faGVhZC5kZXN0cm95KCk7XG4gICAgICB0aGlzLl9oZWFkID0gbnVsbDtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFRyaWdnZXJzIGFuIHVwZGF0ZS4gQW4gdXBkYXRlIGVudGFpbHMgc2V0dGluZyB0aGVcbiAgICogY3VycmVudCB7QGxpbmsgdGlja2VyLlRpY2tlciNlbGFwc2VkTVN8ZWxhcHNlZE1TfSxcbiAgICogdGhlIGN1cnJlbnQge0BsaW5rIHRpY2tlci5UaWNrZXIjZGVsdGFUaW1lfGRlbHRhVGltZX0sXG4gICAqIGludm9raW5nIGFsbCBsaXN0ZW5lcnMgd2l0aCBjdXJyZW50IGRlbHRhVGltZSxcbiAgICogYW5kIHRoZW4gZmluYWxseSBzZXR0aW5nIHtAbGluayB0aWNrZXIuVGlja2VyI2xhc3RUaW1lfGxhc3RUaW1lfVxuICAgKiB3aXRoIHRoZSB2YWx1ZSBvZiBjdXJyZW50VGltZSB0aGF0IHdhcyBwcm92aWRlZC5cbiAgICogVGhpcyBtZXRob2Qgd2lsbCBiZSBjYWxsZWQgYXV0b21hdGljYWxseSBieSBhbmltYXRpb25cbiAgICogZnJhbWUgY2FsbGJhY2tzIGlmIHRoZSB0aWNrZXIgaW5zdGFuY2UgaGFzIGJlZW4gc3RhcnRlZFxuICAgKiBhbmQgbGlzdGVuZXJzIGFyZSBhZGRlZC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtjdXJyZW50VGltZT1wZXJmb3JtYW5jZS5ub3coKV0gLSB0aGUgY3VycmVudCB0aW1lIG9mIGV4ZWN1dGlvblxuICAgKi9cbiAgdXBkYXRlKGN1cnJlbnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkpIHtcbiAgICBsZXQgZWxhcHNlZE1TO1xuICAgIGlmIChjdXJyZW50VGltZSA+IHRoaXMubGFzdFRpbWUpIHtcbiAgICAgIGVsYXBzZWRNUyA9IHRoaXMuZWxhcHNlZE1TID0gY3VycmVudFRpbWUgLSB0aGlzLmxhc3RUaW1lO1xuICAgICAgaWYgKGVsYXBzZWRNUyA+IHRoaXMuX21heEVsYXBzZWRNUykge1xuICAgICAgICBlbGFwc2VkTVMgPSB0aGlzLl9tYXhFbGFwc2VkTVM7XG4gICAgICB9XG4gICAgICBlbGFwc2VkTVMgKj0gdGhpcy5zcGVlZDtcbiAgICAgIGlmICh0aGlzLl9taW5FbGFwc2VkTVMpIHtcbiAgICAgICAgY29uc3QgZGVsdGEgPSBjdXJyZW50VGltZSAtIHRoaXMuX2xhc3RGcmFtZSB8IDA7XG4gICAgICAgIGlmIChkZWx0YSA8IHRoaXMuX21pbkVsYXBzZWRNUykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9sYXN0RnJhbWUgPSBjdXJyZW50VGltZSAtIGRlbHRhICUgdGhpcy5fbWluRWxhcHNlZE1TO1xuICAgICAgfVxuICAgICAgdGhpcy5kZWx0YU1TID0gZWxhcHNlZE1TO1xuICAgICAgdGhpcy5kZWx0YVRpbWUgPSB0aGlzLmRlbHRhTVMgKiBfVGlja2VyLnRhcmdldEZQTVM7XG4gICAgICBjb25zdCBoZWFkID0gdGhpcy5faGVhZDtcbiAgICAgIGxldCBsaXN0ZW5lciA9IGhlYWQubmV4dDtcbiAgICAgIHdoaWxlIChsaXN0ZW5lcikge1xuICAgICAgICBsaXN0ZW5lciA9IGxpc3RlbmVyLmVtaXQodGhpcyk7XG4gICAgICB9XG4gICAgICBpZiAoIWhlYWQubmV4dCkge1xuICAgICAgICB0aGlzLl9jYW5jZWxJZk5lZWRlZCgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRlbHRhVGltZSA9IHRoaXMuZGVsdGFNUyA9IHRoaXMuZWxhcHNlZE1TID0gMDtcbiAgICB9XG4gICAgdGhpcy5sYXN0VGltZSA9IGN1cnJlbnRUaW1lO1xuICB9XG4gIC8qKlxuICAgKiBUaGUgZnJhbWVzIHBlciBzZWNvbmQgYXQgd2hpY2ggdGhpcyB0aWNrZXIgaXMgcnVubmluZy5cbiAgICogVGhlIGRlZmF1bHQgaXMgYXBwcm94aW1hdGVseSA2MCBpbiBtb3N0IG1vZGVybiBicm93c2Vycy5cbiAgICogKipOb3RlOioqIFRoaXMgZG9lcyBub3QgZmFjdG9yIGluIHRoZSB2YWx1ZSBvZlxuICAgKiB7QGxpbmsgdGlja2VyLlRpY2tlciNzcGVlZHxzcGVlZH0sIHdoaWNoIGlzIHNwZWNpZmljXG4gICAqIHRvIHNjYWxpbmcge0BsaW5rIHRpY2tlci5UaWNrZXIjZGVsdGFUaW1lfGRlbHRhVGltZX0uXG4gICAqIEBtZW1iZXIge251bWJlcn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBnZXQgRlBTKCkge1xuICAgIHJldHVybiAxZTMgLyB0aGlzLmVsYXBzZWRNUztcbiAgfVxuICAvKipcbiAgICogTWFuYWdlcyB0aGUgbWF4aW11bSBhbW91bnQgb2YgbWlsbGlzZWNvbmRzIGFsbG93ZWQgdG9cbiAgICogZWxhcHNlIGJldHdlZW4gaW52b2tpbmcge0BsaW5rIHRpY2tlci5UaWNrZXIjdXBkYXRlfHVwZGF0ZX0uXG4gICAqIFRoaXMgdmFsdWUgaXMgdXNlZCB0byBjYXAge0BsaW5rIHRpY2tlci5UaWNrZXIjZGVsdGFUaW1lfGRlbHRhVGltZX0sXG4gICAqIGJ1dCBkb2VzIG5vdCBlZmZlY3QgdGhlIG1lYXN1cmVkIHZhbHVlIG9mIHtAbGluayB0aWNrZXIuVGlja2VyI0ZQU3xGUFN9LlxuICAgKiBXaGVuIHNldHRpbmcgdGhpcyBwcm9wZXJ0eSBpdCBpcyBjbGFtcGVkIHRvIGEgdmFsdWUgYmV0d2VlblxuICAgKiBgMGAgYW5kIGBUaWNrZXIudGFyZ2V0RlBNUyAqIDEwMDBgLlxuICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAqIEBkZWZhdWx0IDEwXG4gICAqL1xuICBnZXQgbWluRlBTKCkge1xuICAgIHJldHVybiAxZTMgLyB0aGlzLl9tYXhFbGFwc2VkTVM7XG4gIH1cbiAgc2V0IG1pbkZQUyhmcHMpIHtcbiAgICBjb25zdCBtaW5GUFMgPSBNYXRoLm1pbih0aGlzLm1heEZQUywgZnBzKTtcbiAgICBjb25zdCBtaW5GUE1TID0gTWF0aC5taW4oTWF0aC5tYXgoMCwgbWluRlBTKSAvIDFlMywgX1RpY2tlci50YXJnZXRGUE1TKTtcbiAgICB0aGlzLl9tYXhFbGFwc2VkTVMgPSAxIC8gbWluRlBNUztcbiAgfVxuICAvKipcbiAgICogTWFuYWdlcyB0aGUgbWluaW11bSBhbW91bnQgb2YgbWlsbGlzZWNvbmRzIHJlcXVpcmVkIHRvXG4gICAqIGVsYXBzZSBiZXR3ZWVuIGludm9raW5nIHtAbGluayB0aWNrZXIuVGlja2VyI3VwZGF0ZXx1cGRhdGV9LlxuICAgKiBUaGlzIHdpbGwgZWZmZWN0IHRoZSBtZWFzdXJlZCB2YWx1ZSBvZiB7QGxpbmsgdGlja2VyLlRpY2tlciNGUFN8RlBTfS5cbiAgICogSWYgaXQgaXMgc2V0IHRvIGAwYCwgdGhlbiB0aGVyZSBpcyBubyBsaW1pdDsgUGl4aUpTIHdpbGwgcmVuZGVyIGFzIG1hbnkgZnJhbWVzIGFzIGl0IGNhbi5cbiAgICogT3RoZXJ3aXNlIGl0IHdpbGwgYmUgYXQgbGVhc3QgYG1pbkZQU2BcbiAgICogQG1lbWJlciB7bnVtYmVyfVxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuICBnZXQgbWF4RlBTKCkge1xuICAgIGlmICh0aGlzLl9taW5FbGFwc2VkTVMpIHtcbiAgICAgIHJldHVybiBNYXRoLnJvdW5kKDFlMyAvIHRoaXMuX21pbkVsYXBzZWRNUyk7XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9XG4gIHNldCBtYXhGUFMoZnBzKSB7XG4gICAgaWYgKGZwcyA9PT0gMCkge1xuICAgICAgdGhpcy5fbWluRWxhcHNlZE1TID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbWF4RlBTID0gTWF0aC5tYXgodGhpcy5taW5GUFMsIGZwcyk7XG4gICAgICB0aGlzLl9taW5FbGFwc2VkTVMgPSAxIC8gKG1heEZQUyAvIDFlMyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBUaGUgc2hhcmVkIHRpY2tlciBpbnN0YW5jZSB1c2VkIGJ5IHtAbGluayBBbmltYXRlZFNwcml0ZX0gYW5kIGJ5XG4gICAqIHtAbGluayBWaWRlb1Jlc291cmNlfSB0byB1cGRhdGUgYW5pbWF0aW9uIGZyYW1lcyAvIHZpZGVvIHRleHR1cmVzLlxuICAgKlxuICAgKiBJdCBtYXkgYWxzbyBiZSB1c2VkIGJ5IHtAbGluayBBcHBsaWNhdGlvbn0gaWYgY3JlYXRlZCB3aXRoIHRoZSBgc2hhcmVkVGlja2VyYCBvcHRpb24gcHJvcGVydHkgc2V0IHRvIHRydWUuXG4gICAqXG4gICAqIFRoZSBwcm9wZXJ0eSB7QGxpbmsgdGlja2VyLlRpY2tlciNhdXRvU3RhcnR8YXV0b1N0YXJ0fSBpcyBzZXQgdG8gYHRydWVgIGZvciB0aGlzIGluc3RhbmNlLlxuICAgKiBQbGVhc2UgZm9sbG93IHRoZSBleGFtcGxlcyBmb3IgdXNhZ2UsIGluY2x1ZGluZyBob3cgdG8gb3B0LW91dCBvZiBhdXRvLXN0YXJ0aW5nIHRoZSBzaGFyZWQgdGlja2VyLlxuICAgKiBAZXhhbXBsZVxuICAgKiBpbXBvcnQgeyBUaWNrZXIgfSBmcm9tICdwaXhpLmpzJztcbiAgICpcbiAgICogY29uc3QgdGlja2VyID0gVGlja2VyLnNoYXJlZDtcbiAgICogLy8gU2V0IHRoaXMgdG8gcHJldmVudCBzdGFydGluZyB0aGlzIHRpY2tlciB3aGVuIGxpc3RlbmVycyBhcmUgYWRkZWQuXG4gICAqIC8vIEJ5IGRlZmF1bHQgdGhpcyBpcyB0cnVlIG9ubHkgZm9yIHRoZSBUaWNrZXIuc2hhcmVkIGluc3RhbmNlLlxuICAgKiB0aWNrZXIuYXV0b1N0YXJ0ID0gZmFsc2U7XG4gICAqXG4gICAqIC8vIEZZSSwgY2FsbCB0aGlzIHRvIGVuc3VyZSB0aGUgdGlja2VyIGlzIHN0b3BwZWQuIEl0IHNob3VsZCBiZSBzdG9wcGVkXG4gICAqIC8vIGlmIHlvdSBoYXZlIG5vdCBhdHRlbXB0ZWQgdG8gcmVuZGVyIGFueXRoaW5nIHlldC5cbiAgICogdGlja2VyLnN0b3AoKTtcbiAgICpcbiAgICogLy8gQ2FsbCB0aGlzIHdoZW4geW91IGFyZSByZWFkeSBmb3IgYSBydW5uaW5nIHNoYXJlZCB0aWNrZXIuXG4gICAqIHRpY2tlci5zdGFydCgpO1xuICAgKiBAZXhhbXBsZVxuICAgKiBpbXBvcnQgeyBhdXRvRGV0ZWN0UmVuZGVyZXIsIENvbnRhaW5lciB9IGZyb20gJ3BpeGkuanMnO1xuICAgKlxuICAgKiAvLyBZb3UgbWF5IHVzZSB0aGUgc2hhcmVkIHRpY2tlciB0byByZW5kZXIuLi5cbiAgICogY29uc3QgcmVuZGVyZXIgPSBhdXRvRGV0ZWN0UmVuZGVyZXIoKTtcbiAgICogY29uc3Qgc3RhZ2UgPSBuZXcgQ29udGFpbmVyKCk7XG4gICAqIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocmVuZGVyZXIudmlldyk7XG4gICAqIHRpY2tlci5hZGQoKHRpbWUpID0+IHJlbmRlcmVyLnJlbmRlcihzdGFnZSkpO1xuICAgKlxuICAgKiAvLyBPciB5b3UgY2FuIGp1c3QgdXBkYXRlIGl0IG1hbnVhbGx5LlxuICAgKiB0aWNrZXIuYXV0b1N0YXJ0ID0gZmFsc2U7XG4gICAqIHRpY2tlci5zdG9wKCk7XG4gICAqIGNvbnN0IGFuaW1hdGUgPSAodGltZSkgPT4ge1xuICAgKiAgICAgdGlja2VyLnVwZGF0ZSh0aW1lKTtcbiAgICogICAgIHJlbmRlcmVyLnJlbmRlcihzdGFnZSk7XG4gICAqICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XG4gICAqIH07XG4gICAqIGFuaW1hdGUocGVyZm9ybWFuY2Uubm93KCkpO1xuICAgKiBAbWVtYmVyIHt0aWNrZXIuVGlja2VyfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHN0YXRpY1xuICAgKi9cbiAgc3RhdGljIGdldCBzaGFyZWQoKSB7XG4gICAgaWYgKCFfVGlja2VyLl9zaGFyZWQpIHtcbiAgICAgIGNvbnN0IHNoYXJlZCA9IF9UaWNrZXIuX3NoYXJlZCA9IG5ldyBfVGlja2VyKCk7XG4gICAgICBzaGFyZWQuYXV0b1N0YXJ0ID0gdHJ1ZTtcbiAgICAgIHNoYXJlZC5fcHJvdGVjdGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIF9UaWNrZXIuX3NoYXJlZDtcbiAgfVxuICAvKipcbiAgICogVGhlIHN5c3RlbSB0aWNrZXIgaW5zdGFuY2UgdXNlZCBieSB7QGxpbmsgQmFzZVByZXBhcmV9IGZvciBjb3JlIHRpbWluZ1xuICAgKiBmdW5jdGlvbmFsaXR5IHRoYXQgc2hvdWxkbid0IHVzdWFsbHkgbmVlZCB0byBiZSBwYXVzZWQsIHVubGlrZSB0aGUgYHNoYXJlZGBcbiAgICogdGlja2VyIHdoaWNoIGRyaXZlcyB2aXN1YWwgYW5pbWF0aW9ucyBhbmQgcmVuZGVyaW5nIHdoaWNoIG1heSB3YW50IHRvIGJlIHBhdXNlZC5cbiAgICpcbiAgICogVGhlIHByb3BlcnR5IHtAbGluayB0aWNrZXIuVGlja2VyI2F1dG9TdGFydHxhdXRvU3RhcnR9IGlzIHNldCB0byBgdHJ1ZWAgZm9yIHRoaXMgaW5zdGFuY2UuXG4gICAqIEBtZW1iZXIge3RpY2tlci5UaWNrZXJ9XG4gICAqIEByZWFkb25seVxuICAgKiBAc3RhdGljXG4gICAqL1xuICBzdGF0aWMgZ2V0IHN5c3RlbSgpIHtcbiAgICBpZiAoIV9UaWNrZXIuX3N5c3RlbSkge1xuICAgICAgY29uc3Qgc3lzdGVtID0gX1RpY2tlci5fc3lzdGVtID0gbmV3IF9UaWNrZXIoKTtcbiAgICAgIHN5c3RlbS5hdXRvU3RhcnQgPSB0cnVlO1xuICAgICAgc3lzdGVtLl9wcm90ZWN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gX1RpY2tlci5fc3lzdGVtO1xuICB9XG59O1xuLyoqXG4gKiBUYXJnZXQgZnJhbWVzIHBlciBtaWxsaXNlY29uZC5cbiAqIEBzdGF0aWNcbiAqL1xuX1RpY2tlci50YXJnZXRGUE1TID0gMC4wNjtcbmxldCBUaWNrZXIgPSBfVGlja2VyO1xuXG5leHBvcnQgeyBUaWNrZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpY2tlci5tanMubWFwXG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBVUERBVEVfUFJJT1JJVFkgPSAvKiBAX19QVVJFX18gKi8gKChVUERBVEVfUFJJT1JJVFkyKSA9PiB7XG4gIFVQREFURV9QUklPUklUWTJbVVBEQVRFX1BSSU9SSVRZMltcIklOVEVSQUNUSU9OXCJdID0gNTBdID0gXCJJTlRFUkFDVElPTlwiO1xuICBVUERBVEVfUFJJT1JJVFkyW1VQREFURV9QUklPUklUWTJbXCJISUdIXCJdID0gMjVdID0gXCJISUdIXCI7XG4gIFVQREFURV9QUklPUklUWTJbVVBEQVRFX1BSSU9SSVRZMltcIk5PUk1BTFwiXSA9IDBdID0gXCJOT1JNQUxcIjtcbiAgVVBEQVRFX1BSSU9SSVRZMltVUERBVEVfUFJJT1JJVFkyW1wiTE9XXCJdID0gLTI1XSA9IFwiTE9XXCI7XG4gIFVQREFURV9QUklPUklUWTJbVVBEQVRFX1BSSU9SSVRZMltcIlVUSUxJVFlcIl0gPSAtNTBdID0gXCJVVElMSVRZXCI7XG4gIHJldHVybiBVUERBVEVfUFJJT1JJVFkyO1xufSkoVVBEQVRFX1BSSU9SSVRZIHx8IHt9KTtcblxuZXhwb3J0IHsgVVBEQVRFX1BSSU9SSVRZIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25zdC5tanMubWFwXG4iXSwibmFtZXMiOlsiX1Nwcml0ZXNoZWV0IiwiY29uc3RydWN0b3IiLCJ0ZXh0dXJlIiwiZGF0YSIsInRoaXMiLCJsaW5rZWRTaGVldHMiLCJfdGV4dHVyZSIsIlRleHR1cmUiLCJ0ZXh0dXJlU291cmNlIiwic291cmNlIiwidGV4dHVyZXMiLCJhbmltYXRpb25zIiwibWV0YVJlc29sdXRpb24iLCJwYXJzZUZsb2F0IiwibWV0YSIsInNjYWxlIiwicmVzb2x1dGlvbiIsIl9yZXNvbHV0aW9uIiwiX2ZyYW1lcyIsImZyYW1lcyIsIl9mcmFtZUtleXMiLCJPYmplY3QiLCJrZXlzIiwiX2JhdGNoSW5kZXgiLCJfY2FsbGJhY2siLCJwYXJzZSIsIlByb21pc2UiLCJyZXNvbHZlIiwibGVuZ3RoIiwiQkFUQ0hfU0laRSIsIl9wcm9jZXNzRnJhbWVzIiwiX3Byb2Nlc3NBbmltYXRpb25zIiwiX3BhcnNlQ29tcGxldGUiLCJfbmV4dEJhdGNoIiwiaW5pdGlhbEZyYW1lSW5kZXgiLCJmcmFtZUluZGV4IiwibWF4RnJhbWVzIiwiaSIsInJlY3QiLCJmcmFtZSIsInRyaW0iLCJzb3VyY2VTaXplIiwidHJpbW1lZCIsIm9yaWciLCJSZWN0YW5nbGUiLCJNYXRoIiwiZmxvb3IiLCJ3IiwiaCIsInJvdGF0ZWQiLCJ4IiwieSIsInNwcml0ZVNvdXJjZVNpemUiLCJyb3RhdGUiLCJkZWZhdWx0QW5jaG9yIiwiYW5jaG9yIiwiZGVmYXVsdEJvcmRlcnMiLCJib3JkZXJzIiwibGFiZWwiLCJ0b1N0cmluZyIsImFuaW1OYW1lIiwiZnJhbWVOYW1lIiwicHVzaCIsImNhbGxiYWNrIiwiY2FsbCIsInNldFRpbWVvdXQiLCJkZXN0cm95IiwiZGVzdHJveUJhc2UiLCJTcHJpdGVzaGVldCIsInZhbGlkSW1hZ2VzIiwiZ2V0Q2FjaGVhYmxlQXNzZXRzIiwiYXNzZXQiLCJpZ25vcmVNdWx0aVBhY2siLCJvdXQiLCJmb3JFYWNoIiwia2V5IiwiYmFzZVBhdGgiLCJwYXRoIiwiZGlybmFtZSIsIml0ZW0iLCJvdXQyIiwicmVsYXRlZF9tdWx0aV9wYWNrcyIsImFzc2lnbiIsInNwcml0ZXNoZWV0QXNzZXQiLCJleHRlbnNpb24iLCJBc3NldCIsImNhY2hlIiwidGVzdCIsInJlc29sdmVyIiwidHlwZSIsIlJlc29sdmVQYXJzZXIiLCJuYW1lIiwidmFsdWUiLCJzcGxpdCIsInBvcCIsImZvcm1hdCIsImluY2x1ZGVzIiwiUmVzb2x2ZXIiLCJSRVRJTkFfUFJFRklYIiwiZXhlYyIsInNyYyIsImxvYWRlciIsIkxvYWRQYXJzZXIiLCJwcmlvcml0eSIsIkxvYWRlclBhcnNlciIsIk5vcm1hbCIsImFzeW5jIiwib3B0aW9ucyIsImV4dG5hbWUiLCJ0b0xvd2VyQ2FzZSIsImltYWdlVGV4dHVyZSIsImltYWdlRmlsZW5hbWUiLCJsYXN0SW5kZXhPZiIsImltYWdlUGF0aCIsImNvcHlTZWFyY2hQYXJhbXMiLCJpbWFnZSIsImxvYWQiLCJzcHJpdGVzaGVldCIsIm11bHRpUGFja3MiLCJBcnJheSIsImlzQXJyYXkiLCJwcm9taXNlcyIsIml0ZW1VcmwiLCJyZXMiLCJhbGwiLCJjb25jYXQiLCJmaWx0ZXIiLCJzcCIsInVubG9hZCIsIl9yZXNvbHZlZEFzc2V0IiwiX3NvdXJjZU9yaWdpbiIsImFkZCIsIlRpY2tlckxpc3RlbmVyIiwiZm4iLCJjb250ZXh0Iiwib25jZSIsIm5leHQiLCJwcmV2aW91cyIsIl9kZXN0cm95ZWQiLCJfZm4iLCJfY29udGV4dCIsIl9vbmNlIiwibWF0Y2giLCJlbWl0IiwidGlja2VyIiwicmVkaXJlY3QiLCJjb25uZWN0IiwiaGFyZCIsIl9UaWNrZXIiLCJhdXRvU3RhcnQiLCJkZWx0YVRpbWUiLCJsYXN0VGltZSIsInNwZWVkIiwic3RhcnRlZCIsIl9yZXF1ZXN0SWQiLCJfbWF4RWxhcHNlZE1TIiwiX21pbkVsYXBzZWRNUyIsIl9wcm90ZWN0ZWQiLCJfbGFzdEZyYW1lIiwiX2hlYWQiLCJJbmZpbml0eSIsImRlbHRhTVMiLCJ0YXJnZXRGUE1TIiwiZWxhcHNlZE1TIiwiX3RpY2siLCJ0aW1lIiwidXBkYXRlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiX3JlcXVlc3RJZk5lZWRlZCIsInBlcmZvcm1hbmNlIiwibm93IiwiX2NhbmNlbElmTmVlZGVkIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJfc3RhcnRJZlBvc3NpYmxlIiwic3RhcnQiLCJOT1JNQUwiLCJfYWRkTGlzdGVuZXIiLCJhZGRPbmNlIiwibGlzdGVuZXIiLCJjdXJyZW50IiwicmVtb3ZlIiwiY291bnQiLCJzdG9wIiwiY3VycmVudFRpbWUiLCJkZWx0YSIsImhlYWQiLCJGUFMiLCJtaW5GUFMiLCJmcHMiLCJtaW4iLCJtYXhGUFMiLCJtaW5GUE1TIiwibWF4Iiwicm91bmQiLCJzaGFyZWQiLCJfc2hhcmVkIiwic3lzdGVtIiwiX3N5c3RlbSIsIlRpY2tlciIsIlVQREFURV9QUklPUklUWSIsIlVQREFURV9QUklPUklUWTIiXSwic291cmNlUm9vdCI6IiJ9